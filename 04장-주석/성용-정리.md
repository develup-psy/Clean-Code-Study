# 4장 주석은 실패에 대한 변명이다

## 1. 4장에 대한 요약

**주석의 중요성**

브라이언 W, 커니핸과 P.J. 플라우거는 "나쁜 코드에 주석을 달지 마라. 새로 짜라"라고 말합니다. 이 말은 주석이 잘못된 코드의 근본적인 문제를 해결하지 못한다는 중요한 메시지를 담고 있습니다.

또한 저자는 잘 달린 주석이 코드에 대한 이해를 돕고, 개발자가 코드를 보다 쉽게 다룰 수 있도록 해준다고 설명합니다. 하지만, 경솔하거나 근거 없는 주석은 코드의 가독성을 방해하고 이해를 어렵게 만든다고 합니다.

저자는 주석은 코드의 의도를 명확히 하기 위해 필요하지만, 주석을 통해 실패를 만회하려는 시도는 결국 실패한 코드를 감추려는 시도일 뿐이라는 점을 강조합니다.

즉, 주석은 코드가 잘못 작성되어 있을 때 이를 보완하려는 수단으로 사용되는 경우가 많습니다. 그러나 주석은 **코드가 진화할 때 그에 따라 변화하지 않기 때문에** **일시적인 정보**일 수밖에 없고, 결국 그 자체로 문제가 될 수 있습니다.

**주석을 작성하는 이유와 코드로 의도를 표현하기**

저자는 주석을 추가하는 일반적인 이유가 코드 품질이 나쁘기 때문이라고 말합니다. 코드가 나쁘면 이를 주석으로 설명하려는 경향이 있는데, 이는 오히려 코드를 더 복잡하게 만들 뿐입니다. 따라서, 주석을 추가하는 대신, 코드를 깔끔하게 작성하여 의도를 자연스럽게 표현해야 합니다. 대부분의 경우, 주석으로 설명하고자 하는 내용을 함수로 표현할 수 있다면, 주석을 달지 않고도 코드만으로 의도를 명확하게 전달할 수 있습니다.

**좋은 주석이란**

좋은 주석은 코드의 품질을 높이고, 다른 프로그래머들이 코드의 의도와 사용 방법을 쉽게 이해하도록 돕습니다. 저자는 좋은 주석의 예시를 다음과 같이 제시합니다:

1. 법적인 주석

- 저작권, 소유권 정보 등을 포함하는 주석. 표준 라이선스나 외부 문서를 포함하는 주석이 해당됩니다.

2. 정보를 제공하는 주석

- 메서드가 반환하는 값이나 복잡한 기능에 대한 설명을 포함하는 주석. 함수명이 명확하지 않거나 코드가 복잡할 때 유용합니다.

3. 의도를 설명하는 주석

- 코드에서의 중요한 결정이나 의도를 설명하는 주석입니다. 기능에 대한 설명이 아닌, 왜 그 방식으로 선택했는지를 설명합니다.

4. 의미를 명료하게 밝히는 주석

- 모호한 인수나 반환값이 있을 때, 그 의미를 명확히 하기 위한 주석. 예를 들어, 표준 라이브러리나 변경할 수 없는 코드에서 발생하는 혼동을 피할 수 있습니다.

5. 결과를 경고하는 주석

- 프로그래머가 실수할 가능성이 있는 부분에 대한 경고를 제공합니다. 예를 들어, "SimpleDateFormat은 스레드에 안전하지 않으므로 각 인스턴스를 독립적으로 생성해야 한다"와 같은 경고는 유용한 주석입니다.

6. TODO 주석

- 앞으로 할 일을 남겨두는 주석으로, 기능 구현이 미완성인 경우 사용할 수 있습니다. 그러나 TODO 주석이 과도하게 사용되면 오히려 코드의 가독성을 떨어뜨릴 수 있으므로 주기적으로 점검해야 합니다.

7. 공개 API에서의 Javadocs

- 좋은 공개 API의 경우, Javadoc을 잘 작성하는 것이 중요합니다. 사용자가 API를 어떻게 사용할지 이해하기 쉽게 작성된 Javadoc은 코드의 재사용성과 유지보수성을 높입니다.

**나쁜 주석이란?**

저자는 대다수의 주석이 실제로 코드의 품질을 떨어뜨리고 있음을 지적하며, 나쁜 주석의 예시를 들고 있습니다. 아래는 주석이 나쁜 이유와 함께 그 예시들입니다.

1. 주절거리는 주석

- 의무적으로 혹은 마지못해 단 주석은 오히려 코드의 이해를 방해합니다. 예를 들어, "속성 파일이 없다면 기본값을 모두 메모리로 읽어 들였다는 의미이다"와 같은 주석은 코드의 맥락을 설명하지 않고 혼동을 초래합니다.

2. 같은 이야기를 반복하는 주석

- 주석이 코드의 내용을 그대로 반복하는 경우, 주석은 사실상 불필요한 것이 됩니다. 예를 들어, 헤더에 작성된 주석이 코드와 완전히 동일한 내용을 반복할 때는 그 자체로 의미가 없습니다.

3. 오해할 여지가 있는 주석

- 의도가 좋지만, 실제로 주석이 정확히 무엇을 의미하는지 명확하지 않은 경우가 많습니다. 이런 주석은 오히려 개발자들에게 혼란을 줄 수 있습니다.

4. 의무적으로 다는 주석

- 모든 함수나 변수에 주석을 달아야 한다는 규칙은 잘못된 접근입니다. 모든 모듈의 첫머리에 변경 이력을 기록하는 관례처럼, 불필요한 주석을 다는 것은 소스 코드의 품질을 떨어뜨릴 수 있습니다.

5. 있으나 마나 한 주석

- 너무 당연한 사실을 언급하는 주석은 오히려 불필요한 정보를 제공하는 것입니다. 이런 주석은 개발자가 무시하게 되는 주석이 되기 쉽습니다.

6. 무서운 잡음

- 불필요한 주석이나 주석이 너무 많이 사용될 경우 코드에 잡음이 생깁니다. 특히 함수나 변수로 표현할 수 있는 내용은 주석을 다는 것보다 코드 자체로 표현하는 것이 좋습니다.

7. 닫는 괄호에 다는 주석

- 작은 함수에서 닫는 괄호에 주석을 다는 것은 불필요한 잡음입니다. 대신 함수를 줄이거나 리팩토링을 통해 명확한 구조를 만드는 것이 중요합니다.

8. 공로를 돌리거나 저자를 표시하는 주석

- 코드에 작성자를 표시하거나 버전 관리에 관한 주석을 다는 것은 이제는 불필요합니다. 버전 관리 시스템이 이를 대신 처리할 수 있기 때문입니다.

9. 주석으로 처리한 코드

- 주석으로 처리된 코드는 코드의 품질을 떨어뜨립니다. 주석 처리된 코드는 불필요한 코드로 간주되며, 이를 정리하는 것이 더 중요합니다.

10. HTML 주석

- HTML 주석은 편집기나 IDE에서 읽기 어렵기 때문에 불필요한 경우가 많습니다. 또한, 주석을 작성하는 데 필요한 책임은 도구가 담당해야 합니다.

11. 전역정보

- 주석을 달 때는 코드의 근처에 있는 정보만 기술해야 합니다. 전역적인 시스템 정보나 코드 외부의 내용은 주석으로 설명하는 것이 부적합합니다.

12. 너무 많은 정보

- 주석에 지나치게 많은 정보를 담는 것은 불필요한 혼란을 초래할 수 있습니다. 흥미로운 역사나 관련 없는 정보를 지나치게 담는 주석은 지양해야 합니다.

13. 모호한 관계

- 주석과 코드 사이의 관계가 명확하지 않으면, 주석은 의미가 없습니다. 주석을 작성할 때는 코드와 주석 사이의 명확한 관계를 설정하는 것이 중요합니다.

14. 함수 헤더

- 함수 헤더에 주석을 다는 것보다는, 함수를 짧게 만들어 이해하기 쉽게 만드는 것이 더 바람직합니다.

15. 비공개 코드에서 Javadocs

- 공개되지 않는 코드에는 Javadocs를 작성하는 것이 비효율적입니다. 비공개 코드에는 코드 자체로 충분히 의미를 전달할 수 있습니다.

## 2. 느낀점 및 배운점

1. 중복된 주석

- 이번 프로젝트에서 주석을 달아서 협업 시 코드 가독성을 높여보려 했으나, 되돌아보니 반복된 주석이 오히려 코드의 가독성을 떨어뜨리고 코드가 더러워졌음을 확인할 수 있었습니다.
- 글만 읽어보면 이해가 될 수도 있지만, 차라리 함수명에 신경 썼다면 코드 자체를 이해하는 데 더 용이했을 것 같다는 생각이 들었습니다.

2. 의무적으로 다는 주석

- 이번 프로젝트에서 굳이 왜 주석을 작성해야 하는지 스스로도 알지 못한 채, 의무감으로 여러 주석을 달았습니다. 주석을 일관성 있게 작성하는 것이 중요하다고 생각했지만, 그 결과 코드가 복잡해졌습니다. 특히 코드가 변경되면 주석도 그에 맞춰 변경해야 하며, 주석을 수정하는 일이 코드 유지보수만큼 어려운 일이라는 사실을 깨달았습니다.
- 기존에 남아있는 주석은 사실상 잘못된 정보를 전달하며 혼동과 무질서를 초래하는 잘못된 해악을 퍼뜨리는 원인이 될 수 있음을 알게 되었습니다.

3. 버전 관리 시스템이 할 수 있는 일은 버전 관리 시스템이 하도록

- 저자가 말한 대로, 주석으로 작성자의 이름이나 코드를 주석 처리하여 실행되지 않도록 하거나 변경 이력을 기록하는 것과 같은 작업은 버전 관리 시스템이 더 효율적으로 할 수 있다는 것을 깨달았습니다.
- 그동안 제가 자주 작성했던 그런 주석들이 사실 불필요하다는 점을 알게 되었습니다.

4. 주석은 오히려 코드 이해에 방해된다

- 이전에는 주석을 읽는 것이 코드 이해에 선행되어 도움이 된다고 생각했었습니다. 그러나 지금은 주석이 시각적으로 방해가 되기도 한다는 점을 4-7 예시를 통해 확실히 느낄 수 있었습니다.
- 4-7 예시에서는 거의 모든 메서드와 클래스에 주석이 달려 있는데, 코드 자체를 이해하는 대신 주석에 눈이 가기 때문에 실제 코드에 대한 이해가 방해받았습니다. 반면 4-8 예시에서는 필요한 정보만 포함되어 있어 훨씬 더 좋은 주석임을 확인할 수 있었습니다.
