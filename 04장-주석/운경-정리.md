# 4장 - 주석

## 도입부

- 코드로 의도를 표현하지 못하는 ‘실패’ 상황에만 어쩔 수 없이 쓰는 것이 주석
- 오래될 수록 코드와 멀어지는 것이 주석 → 그릇된 정보를 제공하게 됨
- 부정확한 주석은 아예 없는 주석보다 훨씬 더 나쁨
- **주석을 가능한 줄이도록 꾸준히 노력**

## 주석은 나쁜 코드를 보완하지 못한다

- 코드에 주석을 추가하는 일반적인 이유는 코드 품질이 나쁘기 때문

## 코드로 의도를 표현하라!

- 가능하다면 코드를 통해 의도를 표현할 수 있도록 노력할 것
    
    ### 잘못된 예시
    
    ```java
    if ((employee.flags & HOURLY_FLAG) && (employee.age > 65))
    ```
    
    ### 좋은 예시
    
    ```java
    if (employee.isEligibleForFullBenefits())
    
    // 복잡한 boolean 조건을 method화하고 그 이름을 통해 의도를 표현
    ```
    

## 좋은 주석

### -법적인 주석

- 소스 파일 첫머리에 들어가는 저작권 정보, 소유권 정보

### -정보를 제공하는 주석

- 기본적인 정보를 주석으로 제공(메소드나 형식 등에 대한 설명)

### -의도를 설명하는 주석

- 구현을 이해하게 도와주는 선을 넘어 결정에 깔린 의도까지 설명하기 위한 주석

### -의미를 명료하게 밝히는 주석

- 모호한 인수나 반환값에 대해 그 의미를 읽기 좋게 표현한 주석
- 인수나 반환값이 표준 라이브러리나 변경하지 못하는 코드에 속할 경우 유용함
- 허나 주석이 올바르지 않게 작성되면 위험할 수 있으니 주의할 것

### -결과를 경고하는 주석

- 다른 프로그래머에게 결과를 경고하는 목적의 주석
- SimpleDateFormat이 thread-safe하지 못하므로 이를 독립적으로 생성할 것은 명시하는 주석이 예시로 주어짐

### -TODO 주석

- 예측 가능한 범위내의 ‘앞으로 할 일’에 대해 주석을 남기고 바람직한 미래 모습을 기술
- 필요하다 여겨지지만 당장 구현하기 어려운 업무를 기술(TODO 주석을 보여주는 기능을 가진 IDE와 연계)
    
    ### 예시
    
    ```java
    // ToDO-MdM 현재 필요하지 않다.
    // 체크아웃 모델을 도입하면 함수가 필요 없다.
    protected VersionInfo makeVersion() throws Exception
    {
    	return null;
    }
    ```
    

### -중요성을 강조하는 주석

- 자칫 대수롭지 않다고 여겨질 뭔가의 중요성을 강조하기 위해서 주석 사용
- 별 것 아니라고 생각되지만,  삭제되거나 변경되면 로직 자체가 바뀔 수 있는 부분
    - ex) trim(), short-circuit evaluation 등

### -공개 API에서 Javadocs

- 표준 자바 라이브러리와 같은 공개 API에 대한 설명을 부여하기 위한 주석

## 나쁜 주석

### -주절거리는 주석

- 주석이 일부 정보를 담고는 있으나, 다른 코드를 살펴봐야만 전체적인 진상이 파악되는 경우

```java
public void loadProperties()
{
	try
	{
		String propertiesPath = propertiesLocation + "/" + PROPERTIES_FILE;
		FileInputStream propertiesStream = new FileInputStream(propertiesPath);
		loadedProperties.load(propertiesStream);
	}
	catch(IOException e)
	{
		// 속성 파일이 없다면 기본값을 모두 메모리로 읽어 들였다는 의미다.
	}
}
```

- IOException의 발생이 속성 파일이 없음을 의미하는 정보이지만, 어느 부분에서 메모리로 읽어 들인 것인지 알 수 없어 다른 코드를 살펴봐야 함

### -같은 이야기를 중복하는 주석

- 같은 코드 내용을 그대로 중복하여 서술하는 주석은 지양
- 쉽게 말해 그냥 코드를 읽어도 쉽게 파악 가능하며, 더 정확하게 의미 전달이 될 경우에는 굳이 주석을 달지 말자

### -오해할 여지가 있는 주석

- 애매하게 달린 주석으로 인해 잘못된 정보를 사실로 오해하여 오히려 생산성이 저하

### -의무적으로 다는 주석

- 굳이 모든 함수에 Javadocs를 달거나 모든 변수에 주석을 달 필요는 없음

### -이력을 기록하는 주석

- 모듈을 편집한 로그 역할을 하는 주석 → VCS의 등장으로 필요가 없어짐

### -있으나 마나 한 주석

- 너무 당연한 사실을 언급하며 새로운 정보를 제공하지 못하는 주석
- 오히려 읽는 개발자로 하여금 주석을 무시하게 함

### -무서운 잡음

- 아무리 공식 API에 대해 설명하기 위한 주석이라도 그저 문서를 제공하기 위한 욕심의 주석은 지양

### -함수나 변수로 표현할 수 있다면 주석을 달지 마라

- 굳이 주석이 필요없음에도 주석을 먼저 작성하고 그에 맞춰 논리를 작성하면 아래와 코드가 작성될 수 있음 → 더 나은 코드를 작성할 수 있는 가능성을 차단
    
    ### 잘못된 예시
    
    ```java
    // 전역 목록 <smodule>에 속하는 모듈이 우리가 속한 하위 시스템에 의존하는가?
    if (smodule.getDependSubsystems().contains(subSysMod.getSubSystem())
    ```
    
    ### 좋은 예시
    
    ```java
    ArrayList moduleDependees = smodule.getDependSubsystems();
    String ourSubSystem = subSysMod.getSubSystem();
    if (moduleDepndees.contains(ourSubSystem))
    ```
    

### -위치를 표시하는 주석

- 소스 파일에서 특정 위치를 표시하기 위한 주석의 경우 반드시 필요할 때만 사용할 것
    - ex) // Actions // 의 주석 밑에 특정 기능들을 모아놓기

### -닫는 괄호에 다는 주석

- 닫는 괄호가 어떤 부분에 해당하는 것인지 정보를 표기하기 위한 주석은 지양
- 차라리 더 작고 캡슐화된 함수로 작성하도록 노력
    - ex) try {
        
         while () { ~~~ 
        
        } //while 
        
        ~~~
        
        } //try
        

### -공로를 돌리거나 저자를 표시하는 주석

- VCS가 완전히 대체 가능하므로 코드를 오염시키지 말 것

### -주석으로 처리한 코드

- 이유가 있어 남겨놓은 것이라고 생각되어 쓸모없는 코드가 점차 쌓여가는 문제가 발생
- VCS의 등장으로 인해 지나간 과거의 코드도 잃어버리지 않을 수 있으므로 과감히 삭제할 것

### -HTML 주석

- 그냥 생각도 하지 말자

### -전역 정보

- 코드 일부에 주석을 달면서 시스템의 전반적인 정보를 기술하지 말 것
- 주석을 달아야 한다면 근처에 있는 코드에 대해서만 기술할 것

### -너무 많은 정보

- 흥미로운 역사나 관련 없는 정보를 장황하게 늘어놓는 주석은 지양

### -모호한 관계

- 주석과 주석이 설명하는 코드간의 관계는 명확하도록 작성할 것

### -함수 헤더

- 짧은 함수에 대해선 굳이 주석보단 좋은 이름을 통해 설명할 것

### -비공개 코드에서 Javadocs

- 공개하지 않을 API, 시스템 내부에 속한 클래스와 함수에 Javadocs를 생성할 필요는 없음

## 예제

- 에라토스테네스의 채 알고리즘을 통해 특정 숫자까지의 소수를 담은 배열을 반환하는 메소드를 여러 메소드로 분할 → 각 메소드의 이름을 통해 로직을 설명하고 주석을 대체

## 정리하며

- 주석이 필요한 경우는 코드만 가지고는 그 의도를 분명히 전달하지 못할 때이며, 코드 수준에서 처리가 가능한 경우 주석을 가급적 사용하지 않는 것이 좋다.
- 대부분의 경우 적절히 분리된 구조 및 메소드 이름, 변수명을 통해서 주석을 대체할 수 있다.
- 그래도 굳이 필요한 경우
    - 코드를 사용하거나 고칠 시, 실수하기 쉬운 주의 사항에 대한 주석
    - 공개적인 API에 해당되어 많은 사람들이 읽고 사용하게 되는 경우
- 개인적으로 고민되는 부분은 코드가 쓰이는 전체적인 시스템이나 맥락을 파악하고 있는 사람의 경우는 주석이 없는 것이 도움이 될 수 있지만, 아예 코드를 처음 접하는 문외한의 경우 세세히 기록된 주석이 이해에 도움이 될 수 있다고는 생각되어 이 부분에 대해서는 조직내의 합의가 필요할 듯하다.(담당자 교체 시의 상황 등)