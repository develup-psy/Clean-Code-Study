# 5장. 형식 맞추기

---

## 📍 REVIEW

전체적으로 코드가 눈에 ‘보이는’ 미적인 형태에 대한 이야기. 말 그대로 코드의 작성 내용이 아니라 그 배치에 대한 이야기로서, 모든 알파벳을 색칠된 네모로 치환했을 때 보여지는 결과물의 형태에 대한 이야기와 같다고 해석했다. 띄어쓰기, 들여쓰기의 중요성에 대해 강조하는 챕터이기도 하다. 비기술적으로 보일 수 있으나, 코드의 독자에게는 그 어떠한 것보다 중요한 부분이다.

## 📍 형식 맞추기의 중요성

프로그래머라면 형식을 깔끔하게 맞춰 코드를 짜야 한다. 형식을 위한 규칙을 합의하고, 그 규칙을 따라야 한다.

### 🔍  팀 규칙을 따르라

모든 코드는 결국 하나의 소프트웨어 결과물을 만들어내가 위한 과정이다. 코드 형식이 중요한 이유는, 결과물의 구성요소인 코드에게 통일성을 부여하는 과정이기 때문이다. 일관적이고 매끄러운 양식을 규칙으로서 강제하며, 프로그래머에게는 동일한 의사소통의 방식을, 독자에겐 모든 곳의 형식이 통일될 것이라는 믿음을 줄 수 있다.

## 📍 코드의 형식 맞추기

### 🔍  세로 구조

우선적으로 중요한 것은 행의 높이 길이이다. 저자는 각 프로그로그램 별 행 길이의 box plot 그래프를 기반으로, 200줄 정도의 파일들의 구성으로도 충분히 커다란 시스템을 구축할 수 있음을 보여줬다. 거듭 강조하는 “짧은 코드”에 해당하므로 기초적인 중요사항이라 할 수 있겠다.

#### ☑️ 개념적 유사성에 따른 거리 배치

기본적인 중요사항이다. 개념적으로 유사한 것 끼리 가까이 배치하고, 그렇지 않은 것은 멀리 배치해야 한다는 사항이다. 시스템을 이해하기 위해 조각 조각의 함수들을 여기저기 돌아다니며 읽게 하는 뺑뺑이 구조를 만들지 말자는 것과 같다. 인근에 배치시켜야 하는 친화도가 높은 개념의 객체들은 아래와 같다.

- 변수와 그 변수를 사용하는 함수.
- 함수와 그 함수를 호출하는 함수.  
이런 종속함수의 구조에서는 호출하는 함수가 위에, 호출되는 함수가 아래에 배치한다. 모든 것은 가독성을 위한 것으로, 호출된 함수가 어떤 역할을 하는 것인지 바로 파악하도록 돕는 구조에 해당한다.

거리를 가까이 배치하라는 것은 정말 물리적인 거리의 단위이므로, 사이에 불필요한 주석이 있다면 이 역시 제거하는 편이 바람직하다. 추가적으로, 개념과 개념 사이는 빈 행으로 분리해야 한다. 새로운 개념이 시작된다는 시각적인 단서가 되기도 하는 중요한 부분이다.

#### ☑️ 통상적인 선언 위치에 따른 배치

- 인스턴스 변수 : 자바에서는, 인스턴스 변수는 클래스의 맨 처음에, 변수 간의 세로거리가 없이 배치하며 선언하는 것이 통상적이다.
- 상수 : 기본값 상수나 설정 관련 함수는 추상화 최상위 단계에 선언한다. 저차원 함수에 상수가 정의되는 방식은 지양하며, 상위 함수에서 하위 함수에 상수럴 넘겨주는 법이 바람직하다.

### 🔍  가로 구조

가로구조 역시, 우선적으로 중요한 것은 가로 길이이다. 분포 상에서는 주로 20-60자 선이며, 80자 이후는 급격히 감소하는 형태이다. 정확히 몇자라고 정의하긴 어렵겠으나 언제나 “짧은 코드”를 만들려 노력해야 할 것이다.

가로 구조는 주로 가로 공백인 ‘띄어쓰기’와 ‘들여쓰기’로 이루어진다.

#### ☑️ 가로 공백

가로 공백은 주로 개념적 밀접도와 우선순위를 구분할 때 사용된다.

밀접한 개념은 붙여 쓰고, 느슨한 개념은 띄어 쓴다. 밀접한 개념의 예시로는 함수 이름과 인수가 들어가는 괄호 사이가 있고, 느슨한 개념의 예시로는 연산자로 이어지는 변수들, 호출되는 함수의 인수들이 있다. 

또한, 연산의 우선순위에 따라서, 높은 우선순위(곱하기, 제곱 등)에는 공백이 없고 낮은 우선순위(더하기, 빼기)에는 공백을 부여한다. 

#### ☑️ 들여쓰기

들여쓰기는 계층을 표현하기 위한 수단으로, 들여쓰는 정도는 계층에서 코드가 자리잡은 수준에 비례한다. 클래스와 메서드, 메서드 선언과 내부 코드 등이 계층이 구분되는 단위의 예시이다. 들여쓰기를 통해 범위가 구분되고, 프로그래밍 내에서 현재 실행중인 맥락이 어디인지 파악하기가 용이해진다.