# Chapter 12. 창발성

<br>

## 🌱1. 설계 철학과 개발자의 태도
### 🌱1) 창발적 설계란 무엇인가?

- **창발성(Emergence)**: 단순한 규칙을 잘 지키면 자연스럽게 복잡한 설계가 드러난다.
- 설계는 **예측하거나 완성하는 대상이 아니라**, **반복적 개선 속에서 발견되는 결과**다.
- 좋은 구조는 계획보다 **리팩터링과 개선의 습관**에서 탄생한다.

###  🔄2) 설계는 점진적으로 완성된다 

- 설계는 한 번에 완성되지 않는다.
    → **리팩터링 → 테스트 → 개선 반복**을 통해 발전한다.
- 개발자는 구조를 미리 그리는 설계자라기보다
    → **구조를 발견하고 길을 닦는 정리자** 역할을 수행해야 한다.
- 이상적인 설계는 **변화에 유연하게 대응할 수 있는 상태**로 유지되는 것.

###  ✨3) 표현력이 설계의 품질을 결정한다 

- **코드는 팀과 소통하는 문서**다. 컴퓨터만을 위한 것이 아니다.
- 표현력을 높이기 위한 실천:
    - 의미 있는 이름
    - 하나의 목적만 수행하는 함수
    - 테스트 이름을 통한 **의도 드러내기**
    - 일관된 도메인 용어 사용
- **이해하기 쉬운 코드 = 좋은 코드** → 유지보수성과 협업 효율 증대

### ⚡4) 클래스와 함수는 작되, 의미는 명확하게 

- 작고 명확한 단위가 기본 원칙이나, **의미 없이 잘게 나누는 건 해로움**
- 과한 분리는:
    - **인터페이스 남용**
    - **데이터-로직 분리 강박**
    - **불필요한 추상화**를 유발
- 분리의 기준은:
    - **책임의 명확성**
    - **이해 용이성**
    - **현재 문제 해결에 실질적으로 도움이 되는지**

---

<br>

## ⚙️2. 단순한 설계의 4가지 원칙 (Kent Beck) 

### ✔️1) 모든 테스트를 실행하라 

- **테스트 가능한 코드**는 좋은 설계를 자연스럽게 유도한다.
- 테스트 가능성을 확보하려면:
    - **결합도는 낮고**, **응집도는 높은** 구조여야 한다.
    - 의존성 주입, 짧은 함수, 명확한 인터페이스 필요.
- **테스트 실패 = 신뢰할 수 없는 구조**의 신호
→ 테스트 가능한 구조를 만드는 것이 설계 품질 향상의 출발점

### 🛑2) 중복을 제거하라 

- **중복은 설계의 최대 적**: 유지보수성, 확장성 저해
- 중복의 예:
    - 코드 블록 반복
    - 유사한 조건문 또는 로직
    - 같은 기능을 다른 방식으로 구현
- **중복 제거 → 구조 개선 → 리팩토링**
    - 전략 패턴, 팩토리 패턴 등을 활용해 조건 분기 제거 가능

## 📝3) 의도를 분명히 표현하라 

- **코드는 커뮤니케이션 도구**다
- 표현력을 높이는 방법:
    - 좋은 이름: `calculateTax()` vs `handle()`
    - 간결한 함수: 한 가지 목적만 수행
    - 일관된 도메인 용어와 네이밍
    - 테스트 시나리오 이름을 통해 동작 명세 전달
- **의도가 보이면 문서가 필요 없다**

### 🧩4) 클래스와 메서드 수는 최소화하라 

- 기본 원칙: **작고 명확한 단위 유지**
- 그러나 과도한 쪼개기는 오히려 **복잡성과 탐색 비용 증가**
- 기준 없는 분할 예:
    - 구현체 하나만 있는 의미 없는 인터페이스
    - 데이터/로직 강제 분리
    - 미래 확장을 이유로 한 추상화 남용
- **목표는 ‘최소 수’가 아닌 ‘최소 복잡성’**

---

<br>

## 🔧3. 설계를 개선하는 실천 전략 

### 🔄1) 리팩터링은 설계를 드러내는 과정이다 

- 리팩터링 순환 구조:
    1. 테스트 작성
    2. 코드 구현
    3. 테스트 통과 확인
    4. 리팩터링
- 리팩터링은 **중복 제거, 의도 표현, 구조 단순화**를 통해
→ **설계를 자연스럽게 드러내는 과정**
- 좋은 설계는 미리 정의하는 것이 아니라 **발견되고 진화하는 것**

### 🧱2) Template Method 패턴으로 중복 제거 

- **공통 로직**은 상위 클래스에서 정의
- **변경되는 부분**만 하위 클래스에서 구현
- 중복 제거와 단일 책임 원칙(SRP) 강화에 효과적
- 새로운 변형이 생겨도 기존 구조는 건드리지 않음 → **확장성 향상**

### 💡3) 표현력을 높이기 위한 실천 방법 

- **좋은 이름**: 역할과 목적을 명확히 표현
- **짧은 함수**: 하나의 개념만 수행하도록 유지
- **명확한 클래스 구성**: 역할별로 구조화
- **테스트 코드**: “시스템이 어떻게 작동해야 하는지”를 설명하는 살아 있는 문서

### 🔪4) 실용적 분리 기준을 가져라 

- 무조건 쪼개기보다 **이해 가능하고 유지보수하기 쉬운 분리**가 중요
- 피해야 할 예:
    - 하나뿐인 구현체에 의미 없는 인터페이스 생성
    - 불필요한 데이터/로직 분리
    - 막연한 확장을 위한 추상화
- 분리의 기준은 항상 **“더 명확해졌는가?”**가 되어야 함

---

<br>

## 🌱4. 창발적 설계의 결론 

### 🔁1) 좋은 설계는 반복과 습관에서 나온다 

- **완벽한 설계는 처음부터 만드는 것이 아니라, 리팩터링을 반복하며 드러나는 것**
- 설계의 핵심은 복잡한 구조보다 **단순한 원칙(테스트, 중복 제거, 의도 표현)**의 반복
- **작은 개선을 습관처럼 적용**할 때, 전체 구조도 자연스럽게 진화한다

### 💼2) 클린 코드는 개발자의 태도에서 시작된다 

- 코드의 품질은 도구나 기술보다 **개발자의 주의력과 책임감**에서 비롯됨
- 좋은 설계는 팀 전체가 **같은 언어로 소통하고 협업**할 수 있는 기반을 마련한다
- 클린 코드는 결국 **개발자의 배려와 습관이 만드는 결과물**
